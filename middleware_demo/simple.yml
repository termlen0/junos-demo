---
- name: Simple playbook
  hosts: node1
  gather_facts: no
  vars:
    isam_up: yes
  tasks:
    - name: Ensure that python3 is installed
      yum:
        name: python3
        state: present
      become: yes
      tags: python3
    - name: Start the python3 webserver
      command: "python3 -m http.server 8080"
      when: isam_up
      tags: python3
    - name: Check reverse proxy
      debug:
        msg: "Status OK"
      tags: reverse_proxy
    - name: Check WebSeal
      debug:
        msg: "WebSeal OK"
      tags: webseal
    - name: Check MGA
      uri:
        url: http://node1:8080
        staus_code: 200
      tags: mga
      register: response

    - debug:
        msg: "{{ response }}"
        verbosity: 1
      tags: mga
